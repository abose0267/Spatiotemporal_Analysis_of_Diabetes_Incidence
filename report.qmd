---
title: "The Unexpected Direct Relationship of Walkability on Diabetes Prevalence in the Southern United States"
format:
  arxiv-pdf:
    keep-tex: true  
    linenumbers: false
    doublespacing: false
    runninghead: "A Preprint"
  arxiv-html: default
author:
  - name: Arkaprabho Bose
    affiliations:
      - name: Texas A & M University
        department: Undergraduate Program in Department of Computer Science
        address: 400 Bizzell Street
        city: College Station, TX
        country: USA
        postal-code: 77843
    orcid: 0000-0003-2402-304X
    email: abose0267@tamu.edu
    url: https://mm218.dev
  - name: Sebastian Oberg
    affiliations:
      - name: Texas A & M University
        department: Undergraduate Program in Department of Computer Science
        address: 400 Bizzell Street
        city: College Station, TX
        country: USA
        postal-code: 77843
  - name: Abhinav Cheruvu
    affiliations:
      - name: Texas A & M University
        department: Undergraduate Program in Department of Mathematics
        address: 400 Bizzell Street
        city: College Station, TX
        country: USA
        postal-code: 77843
abstract: |
  The diabetes epidemic in the United States, influenced by factors such as socioeconomic status and climate, presents a nuanced public health challenge. While the impact of these factors is well-documented, the influence of walkability on diabetes prevalence has been less explored. This study investigates how both socioeconomic and climate variables, alongside walkability, affect diabetes prevalence in the Southern U.S. Contrary to expectations, our findings indicate that higher walkability indexes correlate with an increase in diabetes prevalence. This anomaly persists even when controlling for high blood pressure and low physical activity, which indicates significant regional variance. Our findings show that the relationship between walkability and diabetes prevalence varies significantly by region, driven by distinct socioeconomic and environmental contexts. This variability highlights the need for public health strategies and urban planning that are tailored to the specific regional characteristics to effectively address diabetes.
---

# Introduction {#sec-intro}

## Central Thesis Support

What is so important about diabetes?

Does a high walkability index always lead to a lower diabetes prevalence?

In southern regions, a higher walkability index contributes to diabetes prevalence

This is significant because it will show where diabetes needs more preventative measures


## Paragraph

In this paragraph, we will discuss the importance of the diabetes epidemic. This could include using statistics from qualified sources to show how severe it is and how it needs to be addressed. This paragraph could also discuss the ways that diabetes is currently being combated, including walkability.

In the second paragraph, we discuss the current believe that a higher walkability means that there is a lower chance of diabetes prevalence. we can discuss specific examples where this might not always be the case.

In the third paragraph, we will discuss our thesis statement. We can discuss that this is not always the case and that in the eastern US, walkability actually tends to contribute to diabetes prevalence.

In the 4th paragraph, we can discuss why this finding is important. Specifically, we will talk about the different ways that this information can be used to prevent the increase of diabetes prevalence in the United States.

<!-- ## Paragraphs -->

<!-- P1: This paragraph discusses the importance of diabetes, specifically the impact of it on a population and how common it is -->

<!-- P2: Talk about how there are recent claims that lifestyle factors like living is a highly walkable diets, diets etc  can decrease diabetes cases. -->

<!-- P3: State Thesis and Explain that it is important because it shows that the southern regions are not doing as well to prevent diabetes than other regions -->

<!-- ## Sentences -->

# Related Works

## Central Thesis Support

Paragraph 1: Exploring how location affects diabetes risk, focusing on two studies

  Topic: Introduction to how geographical and environmental factors influence diabetes risk
  Support: Discuss the relevance of location in epidemiological studies, which sets the stage for a deeper exploration of the key studies

Paragraph 2: One study shows that in Northeastern Germany, local factors like socio-economic status impact diabetes risk

  Topic: Detailed analysis of the study conducted in Northeastern Germany
  Support: Describe how this research found that socio-economic status impacts diabetes risk within this specific location Reference the study to emphasize the importance of local factors in assessing diabetes risk

Paragraph 3: Another study links diabetes with obesity and inactivity, stressing location-specific health solutions
  
  Topic: Examine another study that correlates diabetes prevalence with obesity and physical inactivity
  Support: Highlight findings that stress the need for location-specific health solutions, highlighting the importance of understanding local health behaviors and lifestyle factors

Paragraph 4: These insights guide our analysis of walkability’s influence on diabetes in the Southern United States

  Topic: Integrate the insights gained from the mentioned studies and their application to the Southern U.S. context
  Support: Explain how these studies guide and inform the analysis of walkability’s influence on diabetes in the Southern U.S., setting up the premise that walkability might play a similar or different role depending on regional characteristics

<!-- Will reference these two from our journal entries: -->

<!--   - Do the risk factors for type 2 diabetes mellitus vary by location? A spatial analysis of health insurance claims in Northeastern Germany using kernel density estimation and geographically weighted regression -->

<!--   - Spatial Analysis of Incidence of Diagnosed Type 2 Diabetes Mellitus and Its Association With Obesity and Physical Inactivity -->

# Methods

```{r message=FALSE}
source("data/artificialData.R")
source("analysis/gwrAnalysis.R")

# Generate data
data <- create_data()

# Convert data to spatial format and fit GWR
gwr_results <- fit_gwr(data)

# Output results (handle as needed)
print(gwr_results)
```


## Central Thesis Support

In order to analyze diabetes as a response of walkability, we need good, clean data

In order to make sure that walkability is consistent as a coefficient, we choose multiple covariates that might be significant

We used GWR to create coefficient surfaces to analyze which parts of the country had the most impact on diabetes

We compared GWR with Random Forest to show that GWR is not overfitting, to prevent error



## Paragraphs

In the first paragraph, we will talk about the importance of good, clean data. In addition to this, we will also talk about what data we will be analyzing, and where we got it

In the second paragraph, we can discuss the reasoning behind choosing the covariates that we did. This can be a good segue into talking about the GWR, and how we went about cleaning the data.

In the next paragraph, we can talk about how the model was used, and tuned to fit our data. Specifically how we chose a bandwidth and what package we used.

In the last paragraph, we can discuss the plots. In the paragraph, we discuss the ways the different plots were created (facet plots etc.)



# Results

## Central Thesis Level Outline
Paragraph 1: Diabetes Prevalence in The South
  
  Topic: There is a clear positive relationship between walkability and diabetes in the Southern Region.
  Support: From the plots,the estimated impact of walkability on diabetes is consistently higher in the southern to South East region. These areas tend to be red, which is associated with a higher impact of walkability on diabetes prevalence. 

Paragraph 2: Certain reasons why walkability has a positive relationship with diabetes prevalence in the South.

  Topic: Higher temperatures may be a potential reason why Walkability has a positive relationship with Diabetes in the South.
  Support: As seen by the plot, in colder regions such as the west coast and in the Pacific Northwest, there is negative impact of Walkability on Diabetes. Thus, this shows that higher temperatures in the South may lead to people staying indoors, reducing walkability and in turn possibly leading to higher diabetes rates.

Paragraph 3: Other factors that potentially lead to higher Diabetes prevalence

  Topic: Additional Risk factors beside Walkability on Diabetes
  Support: Overall,   certain risk factors such as smoking, obesity, etc. had a high impact on diabetes in every region. We expected this to be the case, further supporting our thesis.


Paragraph 4: Validation metrics

  Topic: Our model's performance overall
  
  Support: From the residual plot, we can see that the points are scattered fairly evenly around and the residual plot does not have a specific pattern, indicating a well-fit model. This further supports our central thesis indiciating that the model we fit is performing well. 
  



From the plots, it shows that the southern region of the United States, walkability had a postive relationship with diabetes prevalence.

From the GWR model's spatial plot which shows the estimated impact of the National Walkability Index it is clear that there is a negative relationship between Walkability and Diabetes.

In the Western Region, though, there is a more positive relationship between the impact of Walkability and Diabetes in the Southern and Eastern Region further supporting our central thesis.

```{r,results='hide',message=FALSE}
source("./Functions/DataProcessing.R")

library(GWmodel)
library(ggplot2)
library(dplyr)
library(ggplot2)
library(sf)
library(tidyverse)
library(corrplot)
```

```{r echo={FALSE}}
loadedData <- loadData()
```

```{r echo={FALSE}}
cleaned_walkability = loadedData$original_walkability %>% clean_walkability()
cleaned_diabetes = loadedData$original_diabetes %>% clean_diabetes()
spatial_data = loadedData$spatial_data %>% clean_spatial()
temp_data = loadedData$temp_data %>% cleaned_weather()
income_data = loadedData$income_data %>% clean_income()
new_dataset = merge(cleaned_walkability, cleaned_diabetes, by = "CountyFIPS", all.x = TRUE, all.y = TRUE) %>% subset( !(StateAbbr %in% c("AK", "HI"))) %>% merge(temp_data, by = "CountyFIPS", all.x = TRUE, all.y = TRUE)
merged_income = merge(new_dataset,income_data,by = "CountyFIPS", all.x = TRUE, all.y = TRUE ) %>% na.omit()
new_spatial_dataset = merge(merged_income,spatial_data, by = "CountyFIPS", all.x = TRUE, all.y = TRUE) %>% na.omit()

summary(new_spatial_dataset)
```

```{r echo={FALSE}}
plot_correlation_matrix(merged_income)
```

```{r echo={FALSE}}
new_spatial_dataset <- na.omit(new_spatial_dataset)
sf_spatial_data<- st_as_sf(new_spatial_dataset)
sf_spatial_data <- as(sf_spatial_data, "Spatial")
```

```{r echo={FALSE}}
plot<- ggplot() +
  geom_sf(data = new_spatial_dataset, aes(geometry = geometry,fill = DIABETES_CrudePrev), color="black",size=0.2) +
  scale_fill_viridis_c(name = "Diabetes Crude Prev") +
  labs(title = "Spatial Distribution of Diabetes Crude Prevalence")

ggsave("original_diabetes_plot.png", plot, width = 8, height = 6, units = "in", dpi = 300)
```


```{r echo={FALSE}}
gwr_model_results = fit_gwr(sf_spatial_data)
```


```{r echo={FALSE}}
adjusted_tvalues <- gwr.t.adjust(gwr_model_results)$SDF %>% as("sf") 
selected_columns <- c(grep("_p$", colnames(adjusted_tvalues), value = TRUE),"geometry")
subset_df <- adjusted_tvalues[, selected_columns]
model_df <- gwr_model_results$SDF %>% as("sf")
for (i in seq_len(nrow(model_df))) {
  # Check values in subset_df
  for (col_name in names(model_df)) {
    # Construct the corresponding column name in subset_df
    col_name_subset <- paste0(col_name, "_p")
    
    # Check if the column exists in subset_df
    if (col_name_subset %in% names(subset_df)) {
      if (subset_df[[col_name_subset]][i] < 0.05) {
        # Set corresponding value in model_df to 0
        model_df[i, col_name] <- 0
      }
    }
  }
}
```

```{r echo=FALSE}


plot(model_df$residual)

```



```{r echo={FALSE}}
plots = data.frame(CountyFIPS = new_spatial_dataset$CountyFIPS,Walkability_Obs = new_spatial_dataset$NatWalkInd,HBP_Obs = new_spatial_dataset$BPHIGH_CrudePrev,walkability_coef= model_df$NatWalkInd, income_impact = new_spatial_dataset$Median.Household.Income * model_df$Median.Household.Income,temp_impact = new_spatial_dataset$avg_temp * model_df$avg_temp, walk_impact = new_spatial_dataset$NatWalkInd * model_df$NatWalkInd, bp_impact = new_spatial_dataset$BPHIGH_CrudePrev * model_df$BPHIGH_CrudePrev, lpa_impact = new_spatial_dataset$LPA_CrudePrev*model_df$LPA_CrudePrev,obesity_impact=new_spatial_dataset$OBESITY_CrudePrev * model_df$OBESITY_CrudePrev, smoking_impact = new_spatial_dataset$CSMOKING_CrudePrev * model_df$CSMOKING_CrudePrev, INTPTLAT=new_spatial_dataset$INTPTLAT, INTPTLON = new_spatial_dataset$INTPTLON, geometry =  new_spatial_dataset$geometry  ) %>%   pivot_longer(cols = c(bp_impact,lpa_impact,smoking_impact,obesity_impact, income_impact, temp_impact),
               names_to = "Impact_Type",
               values_to = "Impact_Value") %>%
  st_sf()


plot1 <- plots %>%
  ggplot() +
  geom_sf(aes(fill = Impact_Value), color = scales::alpha("black", 0.1), ) +
  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0) +
  labs(title = "Estimated Impact of Covariates") +
  facet_wrap(~Impact_Type) 

ggsave("facet_plot.png", plot1, width = 8, height = 6, units = "in", dpi = 300)


plot2 <- plots %>%
  ggplot() +
  geom_sf(aes(fill = walk_impact), color = "black") +
  scale_fill_gradient2(low = "blue", mid = "white", high = "red", midpoint = 0) +
  labs(title = "Estimated Impact of Covariates")
ggsave("impact_plot.png", plot2, width = 8, height = 6, units = "in", dpi = 300)


```

![](impact_plot.png){fig-align="center"}

![](facet_plot.png){fig-align="center"}



# Discussion

## Central Thesis Support

Paragraph 1: Analyzing the relationship between walkability and diabetes prevalence in our study’s context
  
  Topic: Compare and contrast the study’s findings on walkability and diabetes in the Southern U.S. with the existing literature
  Support: Analyze how the results align or contrast from the findings in Northeastern Germany and other relevant studies, which shows the uniqueness of the Southern U.S. context


Paragraph 2: Comparing our findings with existing research to understand regional differences

  Topic: Mention the regional variations in diabetes prevalence and walkability discovered during the study
  Support: Explain how these variations might be influenced by socioeconomic and environmental factors specific to different parts of the Southern U.S.

Paragraph 3: Discussing the implications of our study for local health strategies

  Topic: Suggest tailored public health strategies based on our findings
  Support: Propose specific interventions and urban planning strategies that could be effective in regions with varying walkability indices. Maybe draw parallels to successful approaches in other regions discussed in the literature

Paragraph 4: Highlighting the need for tailored interventions based on regional characteristics to combat diabetes

  Topic: Reinforce the necessity for region-specific approaches to combat diabetes effectively
  Support: Note the broader consequences of the study’s findings for public health policy and urban planning, emphasizing that one-size-fits-all solutions are not effective in addressing the nuanced challenges presented by diabetes


{{< pagebreak >}}

# References {.unnumbered}
